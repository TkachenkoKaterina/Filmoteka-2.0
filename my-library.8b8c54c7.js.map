{"mappings":"oeAAAA,EAAA,S,kECAA,IAAAC,EAAAD,EAAA,S,0BAeA,MAAME,EAAO,CACTC,UAAWC,SAASC,cAAc,sBAClCC,WAAYF,SAASC,cAAc,0BACnCE,SAAUH,SAASC,cAAc,yBAgB9BG,eAAeC,IAClBP,EAAKK,SAASG,oBAAoB,QAASD,GAC3CP,EAAKC,UAAUQ,UAAY,GAE3B,MAAMC,EAAeC,KAAKC,MAAMC,aAAaC,QAAQ,UACrD,GAAqB,OAAjBJ,GAAiD,IAAxBA,EAAaK,OAGtC,OAFAC,EAAAC,OAAOC,KAAK,mDACZlB,EAAKI,WAAWe,iBAAiB,QAASC,GAc9C,MAAMC,EAAmBX,EAAaY,KAAIhB,MAAOiB,IAC7C,MAAMC,QAAiB,EAAAC,EAAAC,YAAW3B,EAAA4B,cAAe5B,EAAA6B,iBAAkBL,EAAIxB,EAAA8B,SACjEC,QAAqBN,EAASO,KAE9BC,EAAeF,EAAaG,OAAOX,KAAIY,GAAMA,EAAGC,OAAMC,KAAK,MAGjE,OADaC,EAASP,EAAcE,EACzB,IAGTM,QAAmBC,QAAQC,IAAInB,GACrCrB,EAAKC,UAAUwC,mBAAmB,YAAaH,EAAWF,KAAK,KAC/DpC,EAAKI,WAAWe,iBAAiB,QAASC,E,CAGvCd,eAAec,IAClBpB,EAAKI,WAAWI,oBAAoB,QAASY,GAC7CpB,EAAKC,UAAUQ,UAAY,GAE3B,MAAMiC,EAAiB/B,KAAKC,MAAMC,aAAaC,QAAQ,YACvD,GAAuB,OAAnB4B,GAAqD,IAA1BA,EAAe3B,OAG1C,OAFAC,EAAAC,OAAOC,KAAK,uCACZlB,EAAKK,SAASc,iBAAiB,QAASZ,GAI5C,MAAMc,EAAmBqB,EAAepB,KAAIhB,MAAOqC,IAC/C,MAAMnB,QAAiB,EAAAC,EAAAC,YAAW3B,EAAA4B,cAAe5B,EAAA6B,iBAAkBe,EAAI5C,EAAA8B,SACjEC,QAAqBN,EAASO,KAC9BC,EAAeF,EAAaG,OAAOX,KAAIY,GAAMA,EAAGC,OAAMC,KAAK,MAEjE,OADaC,EAASP,EAAcE,EACzB,IAETM,QAAmBC,QAAQC,IAAInB,GACrCrB,EAAKC,UAAUwC,mBAAmB,YAAaH,EAAWF,KAAK,KAC/DpC,EAAKK,SAASc,iBAAiB,QAASZ,E,CAG5C,SAASqC,EAAQC,EAAUC,EAAOC,EAAUC,GACxC,IAAIC,EAAO,GAEX,OADqBA,EAAR,OAAbF,EAA4BC,EAAgB,GAAGH,IAAWC,IAAQC,IAC3DE,C,CAGX,SAASZ,EAASa,EAAKC,GACnB,MAAO,iMAKuBP,EACV7C,EAAAqD,aACArD,EAAAsD,cACAH,EAAII,YACJvD,EAAAwD,uKAKUX,EACV7C,EAAAqD,aACArD,EAAAyD,aACAN,EAAII,YACJvD,EAAA0D,0JAKUb,EACV7C,EAAAqD,aACArD,EAAA2D,aACAR,EAAII,YACJvD,EAAA4D,wPAOOT,EAAIU,uKAIAV,EAAIW,oLAKIX,EAAIU,qEACAT,6DACAD,EAAIY,aAAaC,MAAM,EAAG,8C,CAnHzE7D,SAASiB,iBAAiB,mBAAoBC,GAC9CpB,EAAKK,SAASc,iBAAiB,QAASZ,GACxCP,EAAKI,WAAWe,iBAAiB,QAASC,G","sources":["src/my-library.js","src/partials-js/watchedQueueSet.js"],"sourcesContent":["import './partials-js/refs';\nimport './partials-js/vars';\nimport './partials-js/onLoadPage';\nimport './partials-js/themeSwitch';\nimport './partials-js/authorization';\nimport './partials-js/openModal';\nimport './partials-js/addToWatch';\nimport './partials-js/watchedQueueSet';\nimport './partials-js/tuiPagination';\nimport './partials-js/footer-modal';\nimport './partials-js/closePreloader';\n","import {\n    API_KEY,\n    MAIN_PART_URL,\n    MOVIE_BY_ID_PART,\n    MOBILE_STUB,\n    TABLET_STUB,\n    DESKTOP_STUB,\n    BASE_IMG_URL,\n    DESKTOP_SIZES,\n    TABLET_SIZES,\n    MOBILE_SIZES\n} from './vars';\nimport { requestGet } from './requestGet';\nimport { Notify } from 'notiflix';\n\nconst refs = {\n    movieList: document.querySelector('.movie__collection'),\n    watchedBtn: document.querySelector('input[value=\"Watched\"]'),\n    queueBtn: document.querySelector('input[value=\"Queue\"]'),\n}\n\n// --------- Тимчасово-----------//\n\n// const arrOfId = ['76600', '550', '12', '1038779'];\n// const arrOfIdwatched = ['640146','653851', '674324', '615777'];\n// localStorage.setItem(\"queue\", JSON.stringify(arrOfId));\n// localStorage.setItem(\"watched\", JSON.stringify(arrOfIdwatched));\n\n//------------------------------//\n\ndocument.addEventListener('DOMContentLoaded', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n\nexport async function onQueueBtnClick() {\n    refs.queueBtn.removeEventListener('click', onQueueBtnClick);\n    refs.movieList.innerHTML = '';\n\n    const arrOfQueueId = JSON.parse(localStorage.getItem(\"queue\"));\n    if (arrOfQueueId === null || arrOfQueueId.length === 0) {\n        Notify.info(\"You don't have any movies in the queue yet\");\n        refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n        return;\n    }\n\n    // function checkStorage(key) {\n    //     const arrOfId = JSON.parse(localStorage.getItem(key));\n    //     if (arrOfId === null || arrOfId.length === 0) {\n    //         console.log('Фільмів нема');\n    //         refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n    //         return;\n    //     }\n    //     return arrOfId;\n    // }\n\n    const arrPromisesCards = arrOfQueueId.map(async (el) => {\n        const response = await requestGet(MAIN_PART_URL, MOVIE_BY_ID_PART, el, API_KEY);\n        const objDataMovie = await response.data;\n        // console.log(objDataMovie);\n        const genresString = objDataMovie.genres.map(el => el.name).join(', ');\n        // console.log(genresString);\n        const card = makeCard(objDataMovie, genresString);\n        return card;\n    });\n\n    const arrOfCards = await Promise.all(arrPromisesCards);\n    refs.movieList.insertAdjacentHTML('beforeend', arrOfCards.join(''));\n    refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n}\n\nexport async function onWatchedBtnClick() {\n    refs.watchedBtn.removeEventListener('click', onWatchedBtnClick);\n    refs.movieList.innerHTML = '';\n\n    const arrOfWatchedId = JSON.parse(localStorage.getItem(\"watched\"));\n    if (arrOfWatchedId === null || arrOfWatchedId.length === 0) {\n        Notify.info('You have no watched movies yet');\n        refs.queueBtn.addEventListener('click', onQueueBtnClick);\n        return;\n    }\n\n    const arrPromisesCards = arrOfWatchedId.map(async (el) => {\n        const response = await requestGet(MAIN_PART_URL, MOVIE_BY_ID_PART, el, API_KEY);\n        const objDataMovie = await response.data;\n        const genresString = objDataMovie.genres.map(el => el.name).join(', ');\n        const card = makeCard(objDataMovie, genresString);\n        return card;\n    });\n    const arrOfCards = await Promise.all(arrPromisesCards);\n    refs.movieList.insertAdjacentHTML('beforeend', arrOfCards.join(''));\n    refs.queueBtn.addEventListener('click', onQueueBtnClick);\n}\n\nfunction noPhoto(base_url, width, img_file, stub) {\n    let strM = '';\n    img_file === null ? (strM = stub) : (strM = `${base_url}${width}${img_file}`);\n    return strM;\n}\n\nfunction makeCard(obj, genrStr) {\n    return `\n        <li class=\"movie__card\">\n            <div class=\"movie__img__box\">\n                <picture class=\"film-list__img\">\n                    <source\n                        srcset=\"${noPhoto(\n                        BASE_IMG_URL,\n                        DESKTOP_SIZES,\n                        obj.poster_path,\n                        DESKTOP_STUB\n                      )}\"\n                        media=\"screen and (min-width:1200px)\"\n                    />\n                    <source\n                        srcset=\"${noPhoto(\n                        BASE_IMG_URL,\n                        TABLET_SIZES,\n                        obj.poster_path,\n                        TABLET_STUB\n                      )}\"\n                        media=\"(min-width:768px)\"\n                    />\n                    <source\n                        srcset=\"${noPhoto(\n                        BASE_IMG_URL,\n                        MOBILE_SIZES,\n                        obj.poster_path,\n                        MOBILE_STUB\n                      )}\"\n                        media=\"(max-width:767px)\"\n                    />\n                    <img\n                        class=\"movie__img\"\n                        src=\"./images/no-Film-Img.jpg\"\n                        alt=\"${obj.original_title}\"\n                        width=\"450\"\n                        height=\"294\"\n                        name=\"Poster\"\n                        data-id=\"${obj.id}\"\n                    />\n                </picture>           \n            </div>\n            <div class=\"movie__card__textbox\">\n                <h3 class=\"movie__title\">${obj.original_title}</h3>\n                <span class=\"movie__details\">${genrStr} | </span>\n                <span class=\"movie__details\">${obj.release_date.slice(0, 4)}</span>\n            </div>\n        </li>`;\n}"],"names":["parcelRequire","$4zEvq","$b298eec236d1ea1e$var$refs","movieList","document","querySelector","watchedBtn","queueBtn","async","$b298eec236d1ea1e$export$47c64e1cb6fdbeb7","removeEventListener","innerHTML","arrOfQueueId","JSON","parse","localStorage","getItem","length","$7Y9D8","Notify","info","addEventListener","$b298eec236d1ea1e$export$852eb21c65e590aa","arrPromisesCards","map","el1","response","$eFZ6H","requestGet","MAIN_PART_URL","MOVIE_BY_ID_PART","API_KEY","objDataMovie","data","genresString","genres","el","name","join","$b298eec236d1ea1e$var$makeCard","arrOfCards","Promise","all","insertAdjacentHTML","arrOfWatchedId","el2","$b298eec236d1ea1e$var$noPhoto","base_url","width","img_file","stub","strM","obj","genrStr","BASE_IMG_URL","DESKTOP_SIZES","poster_path","DESKTOP_STUB","TABLET_SIZES","TABLET_STUB","MOBILE_SIZES","MOBILE_STUB","original_title","id","release_date","slice"],"version":3,"file":"my-library.8b8c54c7.js.map"}